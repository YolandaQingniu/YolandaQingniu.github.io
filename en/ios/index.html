
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>ios Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../flow.html" />
    
    
    <link rel="prev" href="../android/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    summarize
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../android/">
            
                <a href="../android/">
            
                    
                    android
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    ios
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../flow.html">
            
                <a href="../flow.html">
            
                    
                    Main flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html">
            
                    
                    QNBleApi
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html">
            
                    
                    QNBleApi
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#initsdk">
            
                    
                    initSdk
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#setbledevicediscoverylistener">
            
                    
                    setBleDeviceDiscoveryListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#startbledevicediscovery">
            
                    
                    startBleDeviceDiscovery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.4" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#stopbledevicediscovery">
            
                    
                    stopBleDeviceDiscovery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.5" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#connectdevice">
            
                    
                    connectDevice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.6" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#disconnectdevice">
            
                    
                    disconnectDevice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.7" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#setbleconnectionchangelistener">
            
                    
                    setBleConnectionChangeListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.8" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#setdatalistener">
            
                    
                    setDataListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.9" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#getconfig">
            
                    
                    getConfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.10" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#convertweightwithtargetunit">
            
                    
                    convertWeightWithTargetUnit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.11" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#builduser">
            
                    
                    buildUser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.12" data-path="../api/QNBleApi.html">
            
                <a href="../api/QNBleApi.html#builddevice">
            
                    
                    buildDevice
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../api/QNResultCallback.html">
            
                <a href="../api/QNResultCallback.html">
            
                    
                    QNResultCallback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../api/QNBleDevice.html">
            
                <a href="../api/QNBleDevice.html">
            
                    
                    QNBleDevice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../api/QNUser.html">
            
                <a href="../api/QNUser.html">
            
                    
                    QNUser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../api/QNDataListener.html">
            
                <a href="../api/QNDataListener.html">
            
                    
                    QNDataListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../api/QNConfig.html">
            
                <a href="../api/QNConfig.html">
            
                    
                    QNConfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../api/QNBleConnectionChangeListener.html">
            
                <a href="../api/QNBleConnectionChangeListener.html">
            
                    
                    QNBleConnectionChangeListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../api/QNBleDeviceDiscoveryListener.html">
            
                <a href="../api/QNBleDeviceDiscoveryListener.html">
            
                    
                    QNBleDeviceDiscoveryListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../api/QNScaleData.html">
            
                <a href="../api/QNScaleData.html">
            
                    
                    QNScaleData
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="../api/QNScaleStoreData.html">
            
                <a href="../api/QNScaleStoreData.html">
            
                    
                    QNScaleStoreData
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="../api/QNScaleItemData.html">
            
                <a href="../api/QNScaleItemData.html">
            
                    
                    QNScaleItemData
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Attachment
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../attouched_list/body_indexes.html">
            
                <a href="../attouched_list/body_indexes.html">
            
                    
                    Body index constant
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../attouched_list/body_shape.html">
            
                <a href="../attouched_list/body_shape.html">
            
                    
                    Body type comparison table
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../attouched_list/error_code.html">
            
                <a href="../attouched_list/error_code.html">
            
                    
                    Error code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../attouched_list/scan_error.html">
            
                <a href="../attouched_list/scan_error.html">
            
                    
                    Scan error code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../attouched_list/scale_state.html">
            
                <a href="../attouched_list/scale_state.html">
            
                    
                    Scale state definition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../history/history.html">
            
                <a href="../history/history.html">
            
                    
                    Update log
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >ios</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="qingniu-bluetooth-ios-sdk">Qingniu Bluetooth iOS SDK</h1>
<p>It is recommended to star our github project updates and track the newest SDK updates.</p>
<p>The operation of the SDK requires appid and configuration files. you can use the test appid and test configuration file provided by the QingNiu to accesses demo first.  but need get formal appid and configuration file from QingNiu team if you wanner get more value</p>
<p><a href="https://github.com/YolandaQingniu/sdk-ios-demo.git" target="_blank">Demo click here</a></p>
<h2 id="sdk-file-description">SDK file description</h2>
<h3 id="generation">Generation</h3>
<h4 id="qndevicesdkh">QNDeviceSDK.h</h4>
<p>The .h file contains all header file information</p>
<h3 id="operation">Operation</h3>
<h4 id="qnbleapih">QNBleApi.h</h4>
<p>This class is the main working class of the SDK which can providing operations for various methods of the SDK.</p>
<h3 id="configure">Configure</h3>
<h4 id="qnconfigh">QNConfig.h</h4>
<p>This class is the setting class of the SDK, including the configuration of the scan, the configuration of the connection, the display of the scale unit display, etc.</p>
<h3 id="delegate">Delegate</h3>
<h4 id="qnbleconnectionchangeprotocolh">QNBleConnectionChangeProtocol.h</h4>
<p>This protocol mainly provides callback of various states during the use of the scale.</p>
<h4 id="qnbledevicediscoveryprotocolh">QNBleDeviceDiscoveryProtocol.h</h4>
<p>The protocol mainly provides a re-call when scanning the scale, and saves the callback of the app when stop scanning.</p>
<p>QNBleStateProtocol.h</p>
<p>This protocol mainly provides a callback of the system Bluetooth status.</p>
<h4 id="qndataprotocolh">QNDataProtocol.h</h4>
<p>The protocol mainly provides callbacks for measurement numbers, including real-time weight, measurement results, and stored data.</p>
<h3 id="data">Data</h3>
<h4 id="qnbledeviceh">QNBleDevice.h</h4>
<p>This class mainly displays information of scales.</p>
<h4 id="qnscaledatah">QNScaleData.h</h4>
<p>This class mainly provides measurement result data information.</p>
<h4 id="qnscalestoredatah">QNScaleStoreData.h</h4>
<p>This class mainly provides storage data information.</p>
<h4 id="qnuserh">QNUser.h</h4>
<p>This class mainly contain the user information from SDK which was provided  from APP.</p>
<h4 id="qnscaleitemdata">QNScaleItemData</h4>
<p>This class mainly displays detailed data information for each parameter.</p>
<h3 id="error-message">Error message</h3>
<h4 id="qnerrorcodeh">QNErrorCode.h</h4>
<p>This header file shows all the types of error messages in the SDK.</p>
<h2 id="sdk-callback-steps">SDK callback steps</h2>
<h3 id="1-engineering-configuration">1. Engineering configuration</h3>
<ul>
<li>Get Instructions of using Bluetooth for &quot;Privacy - Bluetooth Peripheral Usage Description&quot; key  from Info.plist</li>
<li>Introducing the SDK path&#x3010;TARGETS&#x3011;-&gt; &#x3010;Build Setting&#x3011;-&gt;&#x3010;Search Paths&#x3011;-&gt;&#x3010;LibrarySearch Paths&#x3011;adding SDK path</li>
<li>Configuration linker &#x3010;TARGETS&#x3011;-&gt; &#x3010;Build Setting&#x3011;-&gt; &#x3010;Linking&#x3011;-&gt; &#x3010;Other Linker Flags&#x3011;adding <code>-ObjC</code>&#x3001;<code>-all_load</code>&#x3001;<code>-force_load [SDKpath]</code> (Choose one of them)</li>
</ul>
<h3 id="2-method-call-step">2. Method call step</h3>
<ol>
<li>Initialize SDK <code>+ (QNBleApi *)sharedBleApi;</code></li>
<li>Configure the system Bluetooth Pop-ups switch<ul>
<li>Get configuration information <code>- (QNConfig *)getConfig;</code></li>
<li>Setting switch value for Pop-ups  <code>showPowerAlertKey</code></li>
</ul>
</li>
<li>Register SDK <code>- (void)initSdk:(NSString *)appId firstDataFile:(NSString *)dataFile callback:(QNResultCallback)callback;</code></li>
<li>Obey and achieve the required delegate</li>
<li>Set the scan configuration (can also be set in step 2) Set the scan configuration (can also be set in step 2)<ul>
<li>Get configuration information <code>- (QNConfig *)getConfig;</code><ul>
<li>Setting whether to scan the turned on scale  <code>onlyScreenOn</code></li>
<li>Setting whether to return multiple times when scanning to the scale<code>allowDuplicates</code></li>
<li>Setting the scan time <code>duration</code></li>
</ul>
</li>
</ul>
</li>
<li>Scan scale <code>- (void)startBleDeviceDiscovery:(QNResultCallback)callback;</code></li>
<li>Setting the connection configuration (can also be set in step 2 or step 45)<ul>
<li>Get configuration information <code>- (QNConfig *)getConfig;</code></li>
<li>Setting scale units display  <code>unit</code></li>
</ul>
</li>
<li>Building a user object that connects the scale <code>- (QNUser *)buildUser:(NSString *)userId height:(int)height gender:(NSString *)gender birthday:(NSDate *)birthday callback:(QNResultCallback)callback</code></li>
<li>Connecting device <code>- (void)connectDevice:(QNBleDevice *)device user:(QNUser *)user callback:(QNResultCallback)callback;</code></li>
</ol>
<h2 id="precautions">Precautions</h2>
<ul>
<li>SDK adaptation 8.0 or above</li>
<li>iOS10.0 or above must configure Bluetooth usage data in Info.plist, otherwise the system&apos;s Bluetooth function cannot be used.</li>
<li>The linker must be configured for the SDK or the SDK will not function properly</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../android/" class="navigation navigation-prev " aria-label="Previous page: android">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../flow.html" class="navigation navigation-next " aria-label="Next page: Main flow">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"ios","level":"1.3","depth":1,"next":{"title":"Main flow","level":"1.4","depth":1,"path":"flow.md","ref":"flow.md","articles":[]},"previous":{"title":"android","level":"1.2","depth":1,"path":"android/README.md","ref":"android/README.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"ios/README.md","mtime":"2018-12-26T07:04:22.493Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-02-19T13:39:53.406Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

